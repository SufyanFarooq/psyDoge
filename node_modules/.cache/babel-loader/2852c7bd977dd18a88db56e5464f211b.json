{"ast":null,"code":"import _regeneratorRuntime from\"D:/psyDoge/untitled folder/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/psyDoge/untitled folder/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"D:/psyDoge/untitled folder/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{contractAddress,abi}from'../utils/constant';import Web3 from'web3';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function History(){var accountAd;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),eventData=_useState2[0],setEventData=_useState2[1];var accounts;var getAccounts=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var web3;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:web3=window.web3;_context.prev=1;_context.next=4;return web3.eth.getAccounts();case 4:accounts=_context.sent;return _context.abrupt(\"return\",accounts);case 8:_context.prev=8;_context.t0=_context[\"catch\"](1);console.log(\"Error while fetching acounts: \",_context.t0);return _context.abrupt(\"return\",null);case 12:case\"end\":return _context.stop();}}},_callee,null,[[1,8]]);}));return function getAccounts(){return _ref.apply(this,arguments);};}();var getContractTransferEventsByUser=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var accounts,newArr,result,web3,contract,continueToken,instructorEvent;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return getAccounts();case 2:accounts=_context2.sent;accountAd=accounts[0];newArr=[];result=[];web3=new Web3('https://data-seed-prebsc-1-s1.binance.org:8545');contract=new web3.eth.Contract(abi,contractAddress);_context2.prev=8;continueToken=\"\";_context2.next=12;return contract.getPastEvents('BetAmount',{fromBlock:12733903,toBlock:12738903},function(error,events){if(events){events.forEach(function(element){var _element$returnValues;console.log(element.transactionHash);console.log(\"Event Data\",element);if((element===null||element===void 0?void 0:(_element$returnValues=element.returnValues)===null||_element$returnValues===void 0?void 0:_element$returnValues.user)===accountAd){var _element$returnValues2,_element$returnValues3,_element$returnValues4;var amount=element===null||element===void 0?void 0:(_element$returnValues2=element.returnValues)===null||_element$returnValues2===void 0?void 0:_element$returnValues2.amount;var card=element===null||element===void 0?void 0:(_element$returnValues3=element.returnValues)===null||_element$returnValues3===void 0?void 0:_element$returnValues3.card;var time=element===null||element===void 0?void 0:(_element$returnValues4=element.returnValues)===null||_element$returnValues4===void 0?void 0:_element$returnValues4.time;var txid=element===null||element===void 0?void 0:element.transactionHash;newArr.push({amount:amount,card:card,time:time,txid:txid});}});}setEventData(newArr);}).then(function(events){});case 12:instructorEvent=_context2.sent;_context2.next=18;break;case 15:_context2.prev=15;_context2.t0=_context2[\"catch\"](8);console.error(\"getEvents\",_context2.t0);case 18:_context2.prev=18;return _context2.abrupt(\"return\",result);case 21:case\"end\":return _context2.stop();}}},_callee2,null,[[8,15,18,21]]);}));return function getContractTransferEventsByUser(){return _ref2.apply(this,arguments);};}();console.log(\"Event Data\",eventData);useEffect(function(){getContractTransferEventsByUser();},[]);return/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-row justify-center pt-0 xsm:pt-10 sm:pt-12 mb-6 px-6 md:px-10 lg:px-14\",children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-white text-xl font-bold\",children:\"Your History\"}),/*#__PURE__*/_jsx(\"div\",{className:\"xsm:w-72 sm:w-94 overflow-x-scroll\",children:/*#__PURE__*/_jsxs(\"table\",{className:\" text-white rounded-t-lg mt-4\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"bg-header text-left text-sm md:text-base\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-2 xsm:px-2 sm:px-4 md:px-7 lg:px-10 sm:py-4  border-r border-b border-black rounded-tl-lg\",children:\"Date\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-3 xsm:px-2 sm:px-4 md:px-7 lg:px-10 border-r border-b border-black\",children:\"Ticket No.\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-3 xsm:px-2 sm:px-4 md:px-7 lg:px-10 border-r border-b border-black\",children:\"Bet\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-3 xsm:px-2 sm:px-4 md:px-7 lg:px-10 border-r border-b border-black\",children:\"Reward\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-3 xsm:px-2 sm:px-4 md:px-7 lg:px-10 border-r border-b border-black\",children:\"Results\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-3 xsm:px-2 sm:px-4 md:px-7 lg:px-10 border-r border-b border-black\",children:\"Profit\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-3 xsm:px-2 sm:px-4 md:px-7 lg:px-10 border-b border-black rounded-tr-lg\",children:\"TXID\"})]})}),eventData&&eventData.map(function(item){var date=new Date(item.time*1000);return/*#__PURE__*/_jsx(\"tbody\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"bg-tcolor text-left text-sm md:text-base\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-2 xsm:px-2 sm:px-4 md:px-7 lg:px-10 sm:py-4 border-r border-b border-black\",children:date.getDate()+\"/\"+(date.getMonth()+1)+\"/\"+date.getFullYear()}),/*#__PURE__*/_jsx(\"td\",{className:\"px-3 xsm:px-2 sm:px-4 md:px-7 lg:px-10 border-r border-b border-black\",children:item.card}),/*#__PURE__*/_jsx(\"td\",{className:\"px-3 xsm:px-2 sm:px-4 md:px-7 lg:px-10 border-r border-b border-black truncate\",children:Web3.utils.fromWei(item.amount)}),item.card===\"1\"?/*#__PURE__*/_jsx(\"td\",{className:\"px-3 xsm:px-2 sm:px-4 md:px-7 lg:px-10 border-r border-b border-black\",children:Web3.utils.fromWei(item.amount*0.5+\"\")}):item.card===\"2\"?/*#__PURE__*/_jsx(\"td\",{className:\"px-3 xsm:px-2 sm:px-4 md:px-7 lg:px-10 border-r border-b border-black\",children:Web3.utils.fromWei(item.amount*1+\"\")}):item.card===\"3\"?/*#__PURE__*/_jsx(\"td\",{className:\"px-3 xsm:px-2 sm:px-4 md:px-7 lg:px-10 border-r border-b border-black\",children:Web3.utils.fromWei(item.amount*1.5+\"\")}):item.card===\"4\"?/*#__PURE__*/_jsx(\"td\",{className:\"px-3 xsm:px-2 sm:px-4 md:px-7 lg:px-10 border-r border-b border-black\",children:Web3.utils.fromWei(item.amount*2+\"\")}):item.card===\"5\"?/*#__PURE__*/_jsx(\"td\",{className:\"px-3 xsm:px-2 sm:px-4 md:px-7 lg:px-10 border-r border-b border-black\",children:Web3.utils.fromWei(item.amount*5+\"\")}):item.card===\"6\"?/*#__PURE__*/_jsx(\"td\",{className:\"px-3 xsm:px-2 sm:px-4 md:px-7 lg:px-10 border-r border-b border-black\",children:Web3.utils.fromWei(item.amount*10+\"\")}):null,item.card===\"1\"?/*#__PURE__*/_jsx(\"td\",{className:\"px-3 xsm:px-2 sm:px-4 md:px-7 lg:px-10 border-r border-b border-black\",children:0.5}):item.card===\"2\"?/*#__PURE__*/_jsx(\"td\",{className:\"px-3 xsm:px-2 sm:px-4 md:px-7 lg:px-10 border-r border-b border-black\",children:1}):item.card===\"3\"?/*#__PURE__*/_jsx(\"td\",{className:\"px-3 xsm:px-2 sm:px-4 md:px-7 lg:px-10 border-r border-b border-black\",children:1.5}):item.card===\"4\"?/*#__PURE__*/_jsx(\"td\",{className:\"px-3 xsm:px-2 sm:px-4 md:px-7 lg:px-10 border-r border-b border-black\",children:2}):item.card===\"5\"?/*#__PURE__*/_jsx(\"td\",{className:\"px-3 xsm:px-2 sm:px-4 md:px-7 lg:px-10 border-r border-b border-black\",children:5}):item.card===\"6\"?/*#__PURE__*/_jsx(\"td\",{className:\"px-3 xsm:px-2 sm:px-4 md:px-7 lg:px-10 border-r border-b border-black\",children:10}):null,item.card===\"1\"?/*#__PURE__*/_jsx(\"td\",{className:\"px-3 xsm:px-2 sm:px-4 md:px-7 lg:px-10 border-r border-b border-black\",children:Web3.utils.fromWei(item.amount*0.5-item.amount+\"\")}):item.card===\"2\"?/*#__PURE__*/_jsx(\"td\",{className:\"px-3 xsm:px-2 sm:px-4 md:px-7 lg:px-10 border-r border-b border-black\",children:Web3.utils.fromWei(item.amount*1-item.amount+\"\")}):item.card===\"3\"?/*#__PURE__*/_jsx(\"td\",{className:\"px-3 xsm:px-2 sm:px-4 md:px-7 lg:px-10 border-r border-b border-black\",children:Web3.utils.fromWei(item.amount*1.5-item.amount+\"\")}):item.card===\"4\"?/*#__PURE__*/_jsx(\"td\",{className:\"px-3 xsm:px-2 sm:px-4 md:px-7 lg:px-10 border-r border-b border-black\",children:Web3.utils.fromWei(item.amount*2-item.amount+\"\")}):item.card===\"5\"?/*#__PURE__*/_jsx(\"td\",{className:\"px-3 xsm:px-2 sm:px-4 md:px-7 lg:px-10 border-r border-b border-black\",children:Web3.utils.fromWei(item.amount*5-item.amount+\"\")}):item.card===\"6\"?/*#__PURE__*/_jsx(\"td\",{className:\"px-3 xsm:px-2 sm:px-4 md:px-7 lg:px-10 border-r border-b border-black\",children:Web3.utils.fromWei(item.amount*10-item.amount+\"\")}):null,/*#__PURE__*/_jsx(\"td\",{className:\"px-3 xsm:px-2 sm:px-4 md:px-7 lg:px-10 border-b border-black truncate\",children:item.txid.substring(0,4)+\"...\"+item.txid.substring(item.txid.length-4)})]})});})]})})]})});}export default History;","map":{"version":3,"sources":["D:/psyDoge/untitled folder/src/components/History.js"],"names":["React","useState","useEffect","contractAddress","abi","Web3","History","accountAd","eventData","setEventData","accounts","getAccounts","web3","window","eth","console","log","getContractTransferEventsByUser","newArr","result","contract","Contract","continueToken","getPastEvents","fromBlock","toBlock","error","events","forEach","element","transactionHash","returnValues","user","amount","card","time","txid","push","then","instructorEvent","map","item","date","Date","getDate","getMonth","getFullYear","utils","fromWei","substring","length"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport { contractAddress, abi } from '../utils/constant'\nimport Web3 from 'web3'\n\nfunction History() {\n    let accountAd;\n    const [eventData, setEventData] = useState([])\n\n    let accounts;\n    const getAccounts = async () => {\n        const web3 = window.web3;\n        try {\n            accounts = await web3.eth.getAccounts();\n            return accounts;\n        } catch (error) {\n            console.log(\"Error while fetching acounts: \", error);\n            return null;\n        }\n    };\n\n\n    const getContractTransferEventsByUser = async () => {\n        let accounts = await getAccounts();\n        accountAd = accounts[0];\n        let newArr = [];\n        let result = [];\n        const web3 = new Web3('https://data-seed-prebsc-1-s1.binance.org:8545');\n        let contract = new web3.eth.Contract(abi, contractAddress);\n        try {\n            let continueToken = \"\";\n            var instructorEvent = await contract.getPastEvents('BetAmount', {\n                fromBlock: 12733903,\n                toBlock: 12738903,\n            }, function (error, events) {\n\n                if (events) {\n                    events.forEach((element) => {\n                        console.log(element.transactionHash)\n                        console.log(\"Event Data\", element);\n                        if (element?.returnValues?.user === accountAd) {\n                            let amount = element?.returnValues?.amount;\n                            let card = element?.returnValues?.card\n                            let time = element?.returnValues?.time;\n                            let txid = element?.transactionHash;\n                            newArr.push({\n                                amount: amount,\n                                card: card,\n                                time: time,\n                                txid: txid\n                            });\n\n                        }\n                    });\n                }\n                setEventData(newArr);\n\n            }).then(function (events) {\n            });\n        } catch (error) {\n            console.error(\"getEvents\", error);\n        } finally {\n            return result;\n        }\n    };\n    console.log(\"Event Data\", eventData)\n\n    useEffect(() => {\n        getContractTransferEventsByUser();\n    }, []);\n\n    return (\n\n        <div className=\"flex flex-row justify-center pt-0 xsm:pt-10 sm:pt-12 mb-6 px-6 md:px-10 lg:px-14\">\n            <div>\n                <h3 className=\"text-white text-xl font-bold\">Your History</h3>\n                <div className=\"xsm:w-72 sm:w-94 overflow-x-scroll\">\n                    <table className=\" text-white rounded-t-lg mt-4\">\n                        <thead>\n                            <tr className=\"bg-header text-left text-sm md:text-base\">\n                                <th className=\"px-4 py-2 xsm:px-2 sm:px-4 md:px-7 lg:px-10 sm:py-4  border-r border-b border-black rounded-tl-lg\">Date</th>\n                                <th className=\"px-3 xsm:px-2 sm:px-4 md:px-7 lg:px-10 border-r border-b border-black\">Ticket No.</th>\n                                <th className=\"px-3 xsm:px-2 sm:px-4 md:px-7 lg:px-10 border-r border-b border-black\">Bet</th>\n                                <th className=\"px-3 xsm:px-2 sm:px-4 md:px-7 lg:px-10 border-r border-b border-black\">Reward</th>\n                                <th className=\"px-3 xsm:px-2 sm:px-4 md:px-7 lg:px-10 border-r border-b border-black\">Results</th>\n                                <th className=\"px-3 xsm:px-2 sm:px-4 md:px-7 lg:px-10 border-r border-b border-black\">Profit</th>\n                                <th className=\"px-3 xsm:px-2 sm:px-4 md:px-7 lg:px-10 border-b border-black rounded-tr-lg\">TXID</th>\n                            </tr>\n                        </thead>\n                        {\n                            eventData && eventData.map(item => {\n                                var date = new Date(item.time * 1000);\n                                return (\n                                    <tbody>\n                                        <tr className=\"bg-tcolor text-left text-sm md:text-base\">\n                                            <td className=\"px-4 py-2 xsm:px-2 sm:px-4 md:px-7 lg:px-10 sm:py-4 border-r border-b border-black\">{date.getDate() +\n                                                \"/\" + (date.getMonth() + 1) +\n                                                \"/\" + date.getFullYear()}</td>\n                                            <td className=\"px-3 xsm:px-2 sm:px-4 md:px-7 lg:px-10 border-r border-b border-black\">{item.card}</td>\n                                            <td className=\"px-3 xsm:px-2 sm:px-4 md:px-7 lg:px-10 border-r border-b border-black truncate\">{Web3.utils.fromWei(item.amount)}</td>\n                                            {\n                                                item.card === \"1\" ? <td className=\"px-3 xsm:px-2 sm:px-4 md:px-7 lg:px-10 border-r border-b border-black\">{Web3.utils.fromWei(item.amount * 0.5 + \"\")}</td> :\n                                                    item.card === \"2\" ? <td className=\"px-3 xsm:px-2 sm:px-4 md:px-7 lg:px-10 border-r border-b border-black\">{Web3.utils.fromWei(item.amount * 1 + \"\")}</td> :\n                                                        item.card === \"3\" ? <td className=\"px-3 xsm:px-2 sm:px-4 md:px-7 lg:px-10 border-r border-b border-black\">{Web3.utils.fromWei(item.amount * 1.5 + \"\")}</td> :\n                                                            item.card === \"4\" ? <td className=\"px-3 xsm:px-2 sm:px-4 md:px-7 lg:px-10 border-r border-b border-black\">{Web3.utils.fromWei(item.amount * 2 + \"\")}</td> :\n                                                                item.card === \"5\" ? <td className=\"px-3 xsm:px-2 sm:px-4 md:px-7 lg:px-10 border-r border-b border-black\">{Web3.utils.fromWei(item.amount * 5 + \"\")}</td> :\n                                                                    item.card === \"6\" ? <td className=\"px-3 xsm:px-2 sm:px-4 md:px-7 lg:px-10 border-r border-b border-black\">{Web3.utils.fromWei(item.amount * 10 + \"\")}</td> :\n                                                                        null\n                                            }\n                                            {\n                                                item.card === \"1\" ? <td className=\"px-3 xsm:px-2 sm:px-4 md:px-7 lg:px-10 border-r border-b border-black\">{0.5}</td> :\n                                                    item.card === \"2\" ? <td className=\"px-3 xsm:px-2 sm:px-4 md:px-7 lg:px-10 border-r border-b border-black\">{1}</td> :\n                                                        item.card === \"3\" ? <td className=\"px-3 xsm:px-2 sm:px-4 md:px-7 lg:px-10 border-r border-b border-black\">{1.5}</td> :\n                                                            item.card === \"4\" ? <td className=\"px-3 xsm:px-2 sm:px-4 md:px-7 lg:px-10 border-r border-b border-black\">{2}</td> :\n                                                                item.card === \"5\" ? <td className=\"px-3 xsm:px-2 sm:px-4 md:px-7 lg:px-10 border-r border-b border-black\">{5}</td> :\n                                                                    item.card === \"6\" ? <td className=\"px-3 xsm:px-2 sm:px-4 md:px-7 lg:px-10 border-r border-b border-black\">{10}</td> :\n                                                                        null\n\n                                            }\n                                            {\n                                                item.card === \"1\" ? <td className=\"px-3 xsm:px-2 sm:px-4 md:px-7 lg:px-10 border-r border-b border-black\">{Web3.utils.fromWei(item.amount * 0.5 - item.amount + \"\")}</td> :\n                                                    item.card === \"2\" ? <td className=\"px-3 xsm:px-2 sm:px-4 md:px-7 lg:px-10 border-r border-b border-black\">{Web3.utils.fromWei(item.amount * 1 - item.amount + \"\")}</td> :\n                                                        item.card === \"3\" ? <td className=\"px-3 xsm:px-2 sm:px-4 md:px-7 lg:px-10 border-r border-b border-black\">{Web3.utils.fromWei(item.amount * 1.5 - item.amount + \"\")}</td> :\n                                                            item.card === \"4\" ? <td className=\"px-3 xsm:px-2 sm:px-4 md:px-7 lg:px-10 border-r border-b border-black\">{Web3.utils.fromWei(item.amount * 2 - item.amount + \"\")}</td> :\n                                                                item.card === \"5\" ? <td className=\"px-3 xsm:px-2 sm:px-4 md:px-7 lg:px-10 border-r border-b border-black\">{Web3.utils.fromWei(item.amount * 5 - item.amount + \"\")}</td> :\n                                                                    item.card === \"6\" ? <td className=\"px-3 xsm:px-2 sm:px-4 md:px-7 lg:px-10 border-r border-b border-black\">{Web3.utils.fromWei(item.amount * 10 - item.amount + \"\")}</td> :\n                                                                        null\n\n                                            }\n                                            <td className=\"px-3 xsm:px-2 sm:px-4 md:px-7 lg:px-10 border-b border-black truncate\">{item.txid.substring(0, 4) + \"...\" + item.txid.substring(item.txid.length - 4)}{ }</td>\n                                        </tr>\n                                    </tbody>\n                                )\n                            })\n                        }\n                    </table>\n                </div>\n            </div>\n        </div>\n    )\n}\n\nexport default History"]},"metadata":{},"sourceType":"module"}